<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Manipulating Data with dplyr | Practical Spatial Data</title>
  <meta name="description" content="Dealing with spatial data for Coastal and Marine Environment in R is for people who want to analyze, visualize and model geographic data with open source software. It is based on R, a statistical programming language that has powerful data processing, manipulating, and visualizing spatial data. The book equips you with the knowledge and skills to tackle a wide range of issues manifested in geographic data, including those with scientific, societal, and environmental implications. This book will interest people from many backgrounds, especially Geographic Information Systems (GIS), who are interested in applying their domain-specific knowledge in a powerful open source language for data science, and R users interested in extending their skills to handle spatial data." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Manipulating Data with dplyr | Practical Spatial Data" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://lugoga.github.io/geomarine/" />
  <meta property="og:image" content="https://lugoga.github.io/geomarine/images/coverPage.svg" />
  <meta property="og:description" content="Dealing with spatial data for Coastal and Marine Environment in R is for people who want to analyze, visualize and model geographic data with open source software. It is based on R, a statistical programming language that has powerful data processing, manipulating, and visualizing spatial data. The book equips you with the knowledge and skills to tackle a wide range of issues manifested in geographic data, including those with scientific, societal, and environmental implications. This book will interest people from many backgrounds, especially Geographic Information Systems (GIS), who are interested in applying their domain-specific knowledge in a powerful open source language for data science, and R users interested in extending their skills to handle spatial data." />
  <meta name="github-repo" content="lugoga/geomarine" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Manipulating Data with dplyr | Practical Spatial Data" />
  
  <meta name="twitter:description" content="Dealing with spatial data for Coastal and Marine Environment in R is for people who want to analyze, visualize and model geographic data with open source software. It is based on R, a statistical programming language that has powerful data processing, manipulating, and visualizing spatial data. The book equips you with the knowledge and skills to tackle a wide range of issues manifested in geographic data, including those with scientific, societal, and environmental implications. This book will interest people from many backgrounds, especially Geographic Information Systems (GIS), who are interested in applying their domain-specific knowledge in a powerful open source language for data science, and R users interested in extending their skills to handle spatial data." />
  <meta name="twitter:image" content="https://lugoga.github.io/geomarine/images/coverPage.svg" />

<meta name="author" content="Masumbuko Semba" />


<meta name="date" content="2021-01-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="tidy.html"/>
<link rel="next" href="plotting-in-r-with-ggplot2.html"/>
<script src="libs/header-attrs-2.6/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.3/leaflet.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.16/datatables.js"></script>
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.10.20/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.10.20/js/jquery.dataTables.min.js"></script>
<link href="libs/crosstalk-1.1.0.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.0.1/js/crosstalk.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="book.css" type="text/css" />
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.14.0/css/all.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class='before'><a href="./">Practical Spatial Data: Coastal and Mrine in R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#preface"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#what-will-you-learn"><i class="fa fa-check"></i>What will you learn?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#audience"><i class="fa fa-check"></i>Audience</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#why-read-this-book"><i class="fa fa-check"></i>Why read this book?</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgments"><i class="fa fa-check"></i>Acknowledgments</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#how-this-book-came-to-being"><i class="fa fa-check"></i>How this book came to being</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#about-the-author"><i class="fa fa-check"></i>About the author</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#license"><i class="fa fa-check"></i>License</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction to GIS</a>
<ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#what-is-a-gis"><i class="fa fa-check"></i><b>1.1</b> What is a GIS</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#gis-software"><i class="fa fa-check"></i><b>1.2</b> GIS software</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="intro.html"><a href="intro.html#arcgis"><i class="fa fa-check"></i><b>1.2.1</b> ArcGIS</a></li>
<li class="chapter" data-level="1.2.2" data-path="intro.html"><a href="intro.html#qgis"><i class="fa fa-check"></i><b>1.2.2</b> QGIS</a></li>
<li class="chapter" data-level="1.2.3" data-path="intro.html"><a href="intro.html#r"><i class="fa fa-check"></i><b>1.2.3</b> R</a></li>
<li class="chapter" data-level="1.2.4" data-path="intro.html"><a href="intro.html#why-r"><i class="fa fa-check"></i><b>1.2.4</b> Why R?</a></li>
<li class="chapter" data-level="1.2.5" data-path="intro.html"><a href="intro.html#rstudio"><i class="fa fa-check"></i><b>1.2.5</b> Rstudio</a></li>
<li class="chapter" data-level="1.2.6" data-path="intro.html"><a href="intro.html#why-rstudio"><i class="fa fa-check"></i><b>1.2.6</b> Why RStudio?</a></li>
<li class="chapter" data-level="1.2.7" data-path="intro.html"><a href="intro.html#packages"><i class="fa fa-check"></i><b>1.2.7</b> Packages</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#communication-of-results"><i class="fa fa-check"></i><b>1.3</b> Communication of results</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="a-glimpse-of-r-rstudio-and-packages.html"><a href="a-glimpse-of-r-rstudio-and-packages.html"><i class="fa fa-check"></i><b>2</b> A glimpse of R, Rstudio and Packages</a>
<ul>
<li class="chapter" data-level="2.1" data-path="a-glimpse-of-r-rstudio-and-packages.html"><a href="a-glimpse-of-r-rstudio-and-packages.html#the-data-analysis-workflow"><i class="fa fa-check"></i><b>2.1</b> The Data Analysis Workflow</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="a-glimpse-of-r-rstudio-and-packages.html"><a href="a-glimpse-of-r-rstudio-and-packages.html#data-wrangling"><i class="fa fa-check"></i><b>2.1.1</b> Data Wrangling</a></li>
<li class="chapter" data-level="2.1.2" data-path="a-glimpse-of-r-rstudio-and-packages.html"><a href="a-glimpse-of-r-rstudio-and-packages.html#importing-data"><i class="fa fa-check"></i><b>2.1.2</b> Importing Data</a></li>
<li class="chapter" data-level="2.1.3" data-path="a-glimpse-of-r-rstudio-and-packages.html"><a href="a-glimpse-of-r-rstudio-and-packages.html#tidying-data"><i class="fa fa-check"></i><b>2.1.3</b> Tidying Data</a></li>
<li class="chapter" data-level="2.1.4" data-path="a-glimpse-of-r-rstudio-and-packages.html"><a href="a-glimpse-of-r-rstudio-and-packages.html#transforming-data"><i class="fa fa-check"></i><b>2.1.4</b> Transforming Data</a></li>
<li class="chapter" data-level="2.1.5" data-path="a-glimpse-of-r-rstudio-and-packages.html"><a href="a-glimpse-of-r-rstudio-and-packages.html#visualizing-data"><i class="fa fa-check"></i><b>2.1.5</b> Visualizing Data</a></li>
<li class="chapter" data-level="2.1.6" data-path="a-glimpse-of-r-rstudio-and-packages.html"><a href="a-glimpse-of-r-rstudio-and-packages.html#models"><i class="fa fa-check"></i><b>2.1.6</b> Models</a></li>
<li class="chapter" data-level="2.1.7" data-path="a-glimpse-of-r-rstudio-and-packages.html"><a href="a-glimpse-of-r-rstudio-and-packages.html#data-collaboration-and-publishing"><i class="fa fa-check"></i><b>2.1.7</b> Data Collaboration and Publishing</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="a-glimpse-of-r-rstudio-and-packages.html"><a href="a-glimpse-of-r-rstudio-and-packages.html#installation"><i class="fa fa-check"></i><b>2.2</b> Installation</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="a-glimpse-of-r-rstudio-and-packages.html"><a href="a-glimpse-of-r-rstudio-and-packages.html#installing-r"><i class="fa fa-check"></i><b>2.2.1</b> Installing R</a></li>
<li class="chapter" data-level="2.2.2" data-path="a-glimpse-of-r-rstudio-and-packages.html"><a href="a-glimpse-of-r-rstudio-and-packages.html#installing-rstudio"><i class="fa fa-check"></i><b>2.2.2</b> Installing RStudio</a></li>
<li class="chapter" data-level="2.2.3" data-path="a-glimpse-of-r-rstudio-and-packages.html"><a href="a-glimpse-of-r-rstudio-and-packages.html#installing-packages"><i class="fa fa-check"></i><b>2.2.3</b> Installing Packages</a></li>
<li class="chapter" data-level="2.2.4" data-path="a-glimpse-of-r-rstudio-and-packages.html"><a href="a-glimpse-of-r-rstudio-and-packages.html#other-packages"><i class="fa fa-check"></i><b>2.2.4</b> Other packages</a></li>
<li class="chapter" data-level="2.2.5" data-path="a-glimpse-of-r-rstudio-and-packages.html"><a href="a-glimpse-of-r-rstudio-and-packages.html#loading-installed-packages"><i class="fa fa-check"></i><b>2.2.5</b> Loading installed packages</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="dataTypes.html"><a href="dataTypes.html"><i class="fa fa-check"></i><b>3</b> Understanding Data in R</a>
<ul>
<li class="chapter" data-level="3.1" data-path="dataTypes.html"><a href="dataTypes.html#data-types"><i class="fa fa-check"></i><b>3.1</b> Data Types</a></li>
<li class="chapter" data-level="3.2" data-path="dataTypes.html"><a href="dataTypes.html#vectors"><i class="fa fa-check"></i><b>3.2</b> Vectors</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="dataTypes.html"><a href="dataTypes.html#numeric-vector"><i class="fa fa-check"></i><b>3.2.1</b> Numeric Vector</a></li>
<li class="chapter" data-level="3.2.2" data-path="dataTypes.html"><a href="dataTypes.html#integer-vector"><i class="fa fa-check"></i><b>3.2.2</b> Integer vector</a></li>
<li class="chapter" data-level="3.2.3" data-path="dataTypes.html"><a href="dataTypes.html#character-vector"><i class="fa fa-check"></i><b>3.2.3</b> Character vector</a></li>
<li class="chapter" data-level="3.2.4" data-path="dataTypes.html"><a href="dataTypes.html#factor-vector"><i class="fa fa-check"></i><b>3.2.4</b> Factor vector</a></li>
<li class="chapter" data-level="3.2.5" data-path="dataTypes.html"><a href="dataTypes.html#logical-vector"><i class="fa fa-check"></i><b>3.2.5</b> Logical Vector</a></li>
<li class="chapter" data-level="3.2.6" data-path="dataTypes.html"><a href="dataTypes.html#date-and-time"><i class="fa fa-check"></i><b>3.2.6</b> Date and Time</a></li>
<li class="chapter" data-level="3.2.7" data-path="dataTypes.html"><a href="dataTypes.html#indexing-the-element"><i class="fa fa-check"></i><b>3.2.7</b> Indexing the element</a></li>
<li class="chapter" data-level="3.2.8" data-path="dataTypes.html"><a href="dataTypes.html#adding-and-replacing-an-element-in-a-vector"><i class="fa fa-check"></i><b>3.2.8</b> Adding and Replacing an element in a vector</a></li>
<li class="chapter" data-level="3.2.9" data-path="dataTypes.html"><a href="dataTypes.html#number-of-elements-in-a-vector"><i class="fa fa-check"></i><b>3.2.9</b> Number of elements in a vector</a></li>
<li class="chapter" data-level="3.2.10" data-path="dataTypes.html"><a href="dataTypes.html#generating-sequence-of-vectors-numbers"><i class="fa fa-check"></i><b>3.2.10</b> Generating sequence of vectors Numbers</a></li>
<li class="chapter" data-level="3.2.11" data-path="dataTypes.html"><a href="dataTypes.html#generating-vector-of-normal-distribution"><i class="fa fa-check"></i><b>3.2.11</b> Generating vector of normal distribution</a></li>
<li class="chapter" data-level="3.2.12" data-path="dataTypes.html"><a href="dataTypes.html#rounding-off-numbers"><i class="fa fa-check"></i><b>3.2.12</b> Rounding off numbers</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="dataTypes.html"><a href="dataTypes.html#data-frame"><i class="fa fa-check"></i><b>3.3</b> Data Frame</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="dataTypes.html"><a href="dataTypes.html#creating-data-frames"><i class="fa fa-check"></i><b>3.3.1</b> Creating data frames</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="dataTypes.html"><a href="dataTypes.html#matrix"><i class="fa fa-check"></i><b>3.4</b> Matrix</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="dataTypes.html"><a href="dataTypes.html#creating-matrices"><i class="fa fa-check"></i><b>3.4.1</b> Creating Matrices</a></li>
<li class="chapter" data-level="3.4.2" data-path="dataTypes.html"><a href="dataTypes.html#adding-attributes-to-matrices"><i class="fa fa-check"></i><b>3.4.2</b> Adding attributes to Matrices</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="dataTypes.html"><a href="dataTypes.html#arrays"><i class="fa fa-check"></i><b>3.5</b> Arrays</a></li>
<li class="chapter" data-level="3.6" data-path="dataTypes.html"><a href="dataTypes.html#dealing-with-misiing-values"><i class="fa fa-check"></i><b>3.6</b> Dealing with Misiing Values</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="readr.html"><a href="readr.html"><i class="fa fa-check"></i><b>4</b> Importing data with <strong>readr</strong></a>
<ul>
<li class="chapter" data-level="4.1" data-path="readr.html"><a href="readr.html#getting-data-into-r"><i class="fa fa-check"></i><b>4.1</b> Getting Data into R</a></li>
<li class="chapter" data-level="4.2" data-path="readr.html"><a href="readr.html#comma-separated-.csv"><i class="fa fa-check"></i><b>4.2</b> Comma-Separated (.csv)</a></li>
<li class="chapter" data-level="4.3" data-path="readr.html"><a href="readr.html#microsoft-excel.xlsx"><i class="fa fa-check"></i><b>4.3</b> Microsoft Excel(.xlsx)</a></li>
<li class="chapter" data-level="4.4" data-path="readr.html"><a href="readr.html#writing-t-a-file"><i class="fa fa-check"></i><b>4.4</b> Writing t a File</a></li>
<li class="chapter" data-level="4.5" data-path="readr.html"><a href="readr.html#basic-data-manipulation"><i class="fa fa-check"></i><b>4.5</b> Basic Data Manipulation</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="readr.html"><a href="readr.html#explore-the-data-frame"><i class="fa fa-check"></i><b>4.5.1</b> Explore the Data Frame</a></li>
<li class="chapter" data-level="4.5.2" data-path="readr.html"><a href="readr.html#simmple-summary-statistics"><i class="fa fa-check"></i><b>4.5.2</b> simmple summary statistics</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="tidy.html"><a href="tidy.html"><i class="fa fa-check"></i><b>5</b> Reshaping data with <strong>tidyr</strong></a>
<ul>
<li class="chapter" data-level="5.1" data-path="tidy.html"><a href="tidy.html#what-is-tidy-data"><i class="fa fa-check"></i><b>5.1</b> What is Tidy Data?</a></li>
<li class="chapter" data-level="5.2" data-path="tidy.html"><a href="tidy.html#gatherfrom-wide-to-long-format."><i class="fa fa-check"></i><b>5.2</b> Gather—from wide to long format.</a></li>
<li class="chapter" data-level="5.3" data-path="tidy.html"><a href="tidy.html#spreadfrom-long-to-wide-format"><i class="fa fa-check"></i><b>5.3</b> spread—from long to wide format</a></li>
<li class="chapter" data-level="5.4" data-path="tidy.html"><a href="tidy.html#separate-columns"><i class="fa fa-check"></i><b>5.4</b> separate columns</a></li>
<li class="chapter" data-level="5.5" data-path="tidy.html"><a href="tidy.html#unite-columns"><i class="fa fa-check"></i><b>5.5</b> unite columns</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="dplyr.html"><a href="dplyr.html"><i class="fa fa-check"></i><b>6</b> Manipulating Data with <strong>dplyr</strong></a>
<ul>
<li class="chapter" data-level="6.1" data-path="dplyr.html"><a href="dplyr.html#why-use-dplyr"><i class="fa fa-check"></i><b>6.1</b> Why use dplyr?</a></li>
<li class="chapter" data-level="6.2" data-path="dplyr.html"><a href="dplyr.html#core-dplyr-functions"><i class="fa fa-check"></i><b>6.2</b> Core dplyr Functions</a></li>
<li class="chapter" data-level="6.3" data-path="dplyr.html"><a href="dplyr.html#data"><i class="fa fa-check"></i><b>6.3</b> Data</a></li>
<li class="chapter" data-level="6.4" data-path="dplyr.html"><a href="dplyr.html#choosing-rows-filtering-observations"><i class="fa fa-check"></i><b>6.4</b> Choosing rows: Filtering observations</a></li>
<li class="chapter" data-level="6.5" data-path="dplyr.html"><a href="dplyr.html#select"><i class="fa fa-check"></i><b>6.5</b> select</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="dplyr.html"><a href="dplyr.html#adding-new-variables-mutate-transmute-add_rownames"><i class="fa fa-check"></i><b>6.5.1</b> Adding new variables: mutate, transmute, add_rownames</a></li>
<li class="chapter" data-level="6.5.2" data-path="dplyr.html"><a href="dplyr.html#arranging-rows"><i class="fa fa-check"></i><b>6.5.2</b> Arranging rows</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="dplyr.html"><a href="dplyr.html#summarizing-and-grouping"><i class="fa fa-check"></i><b>6.6</b> Summarizing and Grouping</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html"><i class="fa fa-check"></i><b>7</b> Plotting in R with <code>ggplot2</code></a>
<ul>
<li class="chapter" data-level="7.1" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#a-dataset"><i class="fa fa-check"></i><b>7.1</b> A dataset</a></li>
<li class="chapter" data-level="7.2" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#components-of-ggplot-objects-components"><i class="fa fa-check"></i><b>7.2</b> Components of ggplot objects {components}</a></li>
<li class="chapter" data-level="7.3" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#building-a-plot"><i class="fa fa-check"></i><b>7.3</b> Building a plot</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#plotting-layers"><i class="fa fa-check"></i><b>7.3.1</b> Plotting layers</a></li>
<li class="chapter" data-level="7.3.2" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#customize-legend"><i class="fa fa-check"></i><b>7.3.2</b> Customize legend</a></li>
<li class="chapter" data-level="7.3.3" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#working-with-titles-and-labels"><i class="fa fa-check"></i><b>7.3.3</b> Working with titles and labels</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#customize-glidline-and-axis-labels"><i class="fa fa-check"></i><b>7.4</b> Customize glidline and axis labels</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#remove-the-gray-box-of-points-on-legend"><i class="fa fa-check"></i><b>7.4.1</b> Remove the gray box of points on legend</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#modify-the-position-of-the-legend"><i class="fa fa-check"></i><b>7.5</b> Modify the position of the legend</a>
<ul>
<li class="chapter" data-level="7.5.1" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#change-the-legend-background-and-stroke-color"><i class="fa fa-check"></i><b>7.5.1</b> Change the legend background and stroke color</a></li>
<li class="chapter" data-level="7.5.2" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#modify-background-colors"><i class="fa fa-check"></i><b>7.5.2</b> Modify background colors</a></li>
<li class="chapter" data-level="7.5.3" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#change-the-gridlines"><i class="fa fa-check"></i><b>7.5.3</b> change the gridlines</a></li>
<li class="chapter" data-level="7.5.4" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#change-the-font-size-for-axis-labels-and-titles"><i class="fa fa-check"></i><b>7.5.4</b> Change the font size for axis, labels and titles</a></li>
<li class="chapter" data-level="7.5.5" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#limit-axis-to-a-range"><i class="fa fa-check"></i><b>7.5.5</b> Limit axis to a range</a></li>
<li class="chapter" data-level="7.5.6" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#adding-labels"><i class="fa fa-check"></i><b>7.5.6</b> Adding labels</a></li>
<li class="chapter" data-level="7.5.7" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#add-text-annotation"><i class="fa fa-check"></i><b>7.5.7</b> Add text annotation</a></li>
<li class="chapter" data-level="7.5.8" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#make-the-x-and-y-axis-the-same"><i class="fa fa-check"></i><b>7.5.8</b> Make the x and y axis the same</a></li>
<li class="chapter" data-level="7.5.9" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#faceting-creating-multipanel-plots"><i class="fa fa-check"></i><b>7.5.9</b> Faceting —Creating multi–panel plots</a></li>
<li class="chapter" data-level="7.5.10" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#allow-scales-to-roam-free-scales"><i class="fa fa-check"></i><b>7.5.10</b> Allow scales to roam free (scales)</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#basic-plots"><i class="fa fa-check"></i><b>7.6</b> Basic plots</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#scatterplot"><i class="fa fa-check"></i><b>7.6.1</b> scatterplot</a></li>
<li class="chapter" data-level="7.6.2" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#adding-regression-line"><i class="fa fa-check"></i><b>7.6.2</b> adding regression line</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#linegraph"><i class="fa fa-check"></i><b>7.7</b> Linegraph</a>
<ul>
<li class="chapter" data-level="7.7.1" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#histogram"><i class="fa fa-check"></i><b>7.7.1</b> histogram</a></li>
<li class="chapter" data-level="7.7.2" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#boxplot"><i class="fa fa-check"></i><b>7.7.2</b> boxplot</a></li>
<li class="chapter" data-level="7.7.3" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#barplot"><i class="fa fa-check"></i><b>7.7.3</b> barplot</a></li>
<li class="chapter" data-level="7.7.4" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#barplot-for-values"><i class="fa fa-check"></i><b>7.7.4</b> barplot for values</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#advanced-plots"><i class="fa fa-check"></i><b>7.8</b> Advanced plots</a>
<ul>
<li class="chapter" data-level="7.8.1" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#facets"><i class="fa fa-check"></i><b>7.8.1</b> Facets</a></li>
<li class="chapter" data-level="7.8.2" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#sea-surface-temperature"><i class="fa fa-check"></i><b>7.8.2</b> Sea Surface Temperature</a></li>
<li class="chapter" data-level="7.8.3" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#subplot"><i class="fa fa-check"></i><b>7.8.3</b> Subplot</a></li>
</ul></li>
<li class="chapter" data-level="7.9" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#colour"><i class="fa fa-check"></i><b>7.9</b> Colour</a></li>
<li class="chapter" data-level="7.10" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#size"><i class="fa fa-check"></i><b>7.10</b> size</a></li>
<li class="chapter" data-level="7.11" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#scaling"><i class="fa fa-check"></i><b>7.11</b> scaling</a></li>
<li class="chapter" data-level="7.12" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#guides"><i class="fa fa-check"></i><b>7.12</b> Guides</a></li>
<li class="chapter" data-level="7.13" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#add-on-packages"><i class="fa fa-check"></i><b>7.13</b> Add-on packages</a></li>
<li class="chapter" data-level="7.14" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#ggridges"><i class="fa fa-check"></i><b>7.14</b> ggridges</a></li>
<li class="chapter" data-level="7.15" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#varying-fill-colors-along-the-x-axis"><i class="fa fa-check"></i><b>7.15</b> Varying fill colors along the x axis</a></li>
<li class="chapter" data-level="7.16" data-path="plotting-in-r-with-ggplot2.html"><a href="plotting-in-r-with-ggplot2.html#metr"><i class="fa fa-check"></i><b>7.16</b> metR</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="feature.html"><a href="feature.html"><i class="fa fa-check"></i><b>8</b> Feature Representation</a>
<ul>
<li class="chapter" data-level="8.1" data-path="feature.html"><a href="feature.html#vector"><i class="fa fa-check"></i><b>8.1</b> Vector</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="feature.html"><a href="feature.html#a-point"><i class="fa fa-check"></i><b>8.1.1</b> A point</a></li>
<li class="chapter" data-level="8.1.2" data-path="feature.html"><a href="feature.html#polyline"><i class="fa fa-check"></i><b>8.1.2</b> Polyline</a></li>
<li class="chapter" data-level="8.1.3" data-path="feature.html"><a href="feature.html#polygon"><i class="fa fa-check"></i><b>8.1.3</b> Polygon</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="feature.html"><a href="feature.html#raster"><i class="fa fa-check"></i><b>8.2</b> Raster</a></li>
<li class="chapter" data-level="8.3" data-path="feature.html"><a href="feature.html#important-gis-data-formats"><i class="fa fa-check"></i><b>8.3</b> Important GIS data formats</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="feature.html"><a href="feature.html#shapefiles"><i class="fa fa-check"></i><b>8.3.1</b> Shapefiles</a></li>
<li class="chapter" data-level="8.3.2" data-path="feature.html"><a href="feature.html#raster-1"><i class="fa fa-check"></i><b>8.3.2</b> Raster</a></li>
<li class="chapter" data-level="8.3.3" data-path="feature.html"><a href="feature.html#attribute-tables"><i class="fa fa-check"></i><b>8.3.3</b> Attribute Tables</a></li>
<li class="chapter" data-level="8.3.4" data-path="feature.html"><a href="feature.html#geodatabase"><i class="fa fa-check"></i><b>8.3.4</b> Geodatabase</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="feature.html"><a href="feature.html#coordinate-reference-systems"><i class="fa fa-check"></i><b>8.4</b> Coordinate reference systems</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="feature.html"><a href="feature.html#geographic-coordinate-systems"><i class="fa fa-check"></i><b>8.4.1</b> Geographic coordinate systems</a></li>
<li class="chapter" data-level="8.4.2" data-path="feature.html"><a href="feature.html#projected-coordinate-systems"><i class="fa fa-check"></i><b>8.4.2</b> Projected coordinate systems</a></li>
<li class="chapter" data-level="8.4.3" data-path="feature.html"><a href="feature.html#setting-coordinate-reference-systems-in-r"><i class="fa fa-check"></i><b>8.4.3</b> Setting Coordinate Reference Systems in R</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="feature.html"><a href="feature.html#practicals"><i class="fa fa-check"></i><b>8.5</b> Practicals</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="feature.html"><a href="feature.html#plotting-point-data"><i class="fa fa-check"></i><b>8.5.1</b> Plotting Point Data</a></li>
<li class="chapter" data-level="8.5.2" data-path="feature.html"><a href="feature.html#geographic-coordinate-sytem"><i class="fa fa-check"></i><b>8.5.2</b> Geographic Coordinate Sytem</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="feature.html"><a href="feature.html#summary"><i class="fa fa-check"></i><b>8.6</b> Summary</a></li>
<li class="chapter" data-level="8.7" data-path="feature.html"><a href="feature.html#questions"><i class="fa fa-check"></i><b>8.7</b> Questions</a></li>
<li class="chapter" data-level="8.8" data-path="feature.html"><a href="feature.html#further-readings"><i class="fa fa-check"></i><b>8.8</b> FUrther readings</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="creating-geospatial-data.html"><a href="creating-geospatial-data.html"><i class="fa fa-check"></i><b>9</b> Creating Geospatial Data</a>
<ul>
<li class="chapter" data-level="9.1" data-path="creating-geospatial-data.html"><a href="creating-geospatial-data.html#getting-data-from-the-web"><i class="fa fa-check"></i><b>9.1</b> Getting data from the web</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="creating-geospatial-data.html"><a href="creating-geospatial-data.html#usage"><i class="fa fa-check"></i><b>9.1.1</b> Usage</a></li>
<li class="chapter" data-level="9.1.2" data-path="creating-geospatial-data.html"><a href="creating-geospatial-data.html#to-download-natural-earth-data-not-already-in-the-package"><i class="fa fa-check"></i><b>9.1.2</b> To download Natural Earth data not already in the package</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="creating-geospatial-data.html"><a href="creating-geospatial-data.html#creating-point-data"><i class="fa fa-check"></i><b>9.2</b> Creating Point Data</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="creating-geospatial-data.html"><a href="creating-geospatial-data.html#creating-point-features"><i class="fa fa-check"></i><b>9.2.1</b> Creating point features</a></li>
<li class="chapter" data-level="9.2.2" data-path="creating-geospatial-data.html"><a href="creating-geospatial-data.html#creating-line-features"><i class="fa fa-check"></i><b>9.2.2</b> Creating line features</a></li>
<li class="chapter" data-level="9.2.3" data-path="creating-geospatial-data.html"><a href="creating-geospatial-data.html#creating-polygon-features"><i class="fa fa-check"></i><b>9.2.3</b> Creating Polygon features</a></li>
<li class="chapter" data-level="9.2.4" data-path="creating-geospatial-data.html"><a href="creating-geospatial-data.html#adding-features-to-vector-data"><i class="fa fa-check"></i><b>9.2.4</b> Adding features to vector data</a></li>
<li class="chapter" data-level="9.2.5" data-path="creating-geospatial-data.html"><a href="creating-geospatial-data.html#digitizing-a-map"><i class="fa fa-check"></i><b>9.2.5</b> Digitizing a map</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="creating-geospatial-data.html"><a href="creating-geospatial-data.html#summary-1"><i class="fa fa-check"></i><b>9.3</b> Summary</a></li>
<li class="chapter" data-level="9.4" data-path="creating-geospatial-data.html"><a href="creating-geospatial-data.html#questions-1"><i class="fa fa-check"></i><b>9.4</b> Questions</a></li>
<li class="chapter" data-level="9.5" data-path="creating-geospatial-data.html"><a href="creating-geospatial-data.html#further-reading"><i class="fa fa-check"></i><b>9.5</b> Further reading</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="working-with-vector-data-in-r.html"><a href="working-with-vector-data-in-r.html"><i class="fa fa-check"></i><b>10</b> Working with vector data in R</a>
<ul>
<li class="chapter" data-level="10.1" data-path="working-with-vector-data-in-r.html"><a href="working-with-vector-data-in-r.html#combining-shapefile-in-r"><i class="fa fa-check"></i><b>10.1</b> Combining shapefile in R</a></li>
<li class="chapter" data-level="10.2" data-path="working-with-vector-data-in-r.html"><a href="working-with-vector-data-in-r.html#clipping-in-r"><i class="fa fa-check"></i><b>10.2</b> Clipping in R</a></li>
<li class="chapter" data-level="10.3" data-path="working-with-vector-data-in-r.html"><a href="working-with-vector-data-in-r.html#differences-in-r"><i class="fa fa-check"></i><b>10.3</b> DIfferences in R</a></li>
<li class="chapter" data-level="10.4" data-path="working-with-vector-data-in-r.html"><a href="working-with-vector-data-in-r.html#area-calculation-in-r"><i class="fa fa-check"></i><b>10.4</b> Area calculation in R</a></li>
<li class="chapter" data-level="10.5" data-path="working-with-vector-data-in-r.html"><a href="working-with-vector-data-in-r.html#buffer"><i class="fa fa-check"></i><b>10.5</b> Buffer</a></li>
<li class="chapter" data-level="10.6" data-path="working-with-vector-data-in-r.html"><a href="working-with-vector-data-in-r.html#intersection"><i class="fa fa-check"></i><b>10.6</b> Intersection</a></li>
<li class="chapter" data-level="10.7" data-path="working-with-vector-data-in-r.html"><a href="working-with-vector-data-in-r.html#statistical-summary-of-vector-layers"><i class="fa fa-check"></i><b>10.7</b> Statistical summary of vector layers</a></li>
<li class="chapter" data-level="10.8" data-path="working-with-vector-data-in-r.html"><a href="working-with-vector-data-in-r.html#summary-2"><i class="fa fa-check"></i><b>10.8</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="working-with-raster-data-in-r.html"><a href="working-with-raster-data-in-r.html"><i class="fa fa-check"></i><b>11</b> Working with raster data in R</a>
<ul>
<li class="chapter" data-level="11.1" data-path="working-with-raster-data-in-r.html"><a href="working-with-raster-data-in-r.html#nc-data"><i class="fa fa-check"></i><b>11.1</b> NC data</a></li>
<li class="chapter" data-level="11.2" data-path="working-with-raster-data-in-r.html"><a href="working-with-raster-data-in-r.html#changing-the-projection-system-of-a-raster-file"><i class="fa fa-check"></i><b>11.2</b> Changing the projection system of a raster file</a>
<ul>
<li class="chapter" data-level="11.2.1" data-path="working-with-raster-data-in-r.html"><a href="working-with-raster-data-in-r.html#reading-tiff-format"><i class="fa fa-check"></i><b>11.2.1</b> Reading Tiff format</a></li>
<li class="chapter" data-level="11.2.2" data-path="working-with-raster-data-in-r.html"><a href="working-with-raster-data-in-r.html#reclassifying-rasters"><i class="fa fa-check"></i><b>11.2.2</b> Reclassifying rasters</a></li>
<li class="chapter" data-level="11.2.3" data-path="working-with-raster-data-in-r.html"><a href="working-with-raster-data-in-r.html#mapping-raster"><i class="fa fa-check"></i><b>11.2.3</b> Mapping raster</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="working-with-raster-data-in-r.html"><a href="working-with-raster-data-in-r.html#summary-3"><i class="fa fa-check"></i><b>11.3</b> Summary</a></li>
<li class="chapter" data-level="11.4" data-path="working-with-raster-data-in-r.html"><a href="working-with-raster-data-in-r.html#questions-2"><i class="fa fa-check"></i><b>11.4</b> Questions</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="maps.html"><a href="maps.html"><i class="fa fa-check"></i><b>12</b> Maps</a>
<ul>
<li class="chapter" data-level="12.1" data-path="maps.html"><a href="maps.html#geographical-data-in-a-tidy-format"><i class="fa fa-check"></i><b>12.1</b> Geographical data in a tidy format</a>
<ul>
<li class="chapter" data-level="12.1.1" data-path="maps.html"><a href="maps.html#create-simple-feature-from-data.frame"><i class="fa fa-check"></i><b>12.1.1</b> Create simple feature from data.frame</a></li>
<li class="chapter" data-level="12.1.2" data-path="maps.html"><a href="maps.html#importing-shapefile"><i class="fa fa-check"></i><b>12.1.2</b> Importing shapefile</a></li>
<li class="chapter" data-level="12.1.3" data-path="maps.html"><a href="maps.html#reading-other-format"><i class="fa fa-check"></i><b>12.1.3</b> Reading other format</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="maps.html"><a href="maps.html#introduction"><i class="fa fa-check"></i><b>12.2</b> Introduction</a></li>
<li class="chapter" data-level="12.3" data-path="maps.html"><a href="maps.html#static-maps"><i class="fa fa-check"></i><b>12.3</b> Static Maps</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="maps.html"><a href="maps.html#the-bathmetry-data"><i class="fa fa-check"></i><b>12.3.1</b> The bathmetry data</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="maps.html"><a href="maps.html#basemap"><i class="fa fa-check"></i><b>12.4</b> Basemap</a></li>
<li class="chapter" data-level="12.5" data-path="maps.html"><a href="maps.html#creating-contour-map"><i class="fa fa-check"></i><b>12.5</b> Creating contour map</a></li>
<li class="chapter" data-level="12.6" data-path="maps.html"><a href="maps.html#inset-maps"><i class="fa fa-check"></i><b>12.6</b> Inset maps</a>
<ul>
<li class="chapter" data-level="12.6.1" data-path="maps.html"><a href="maps.html#choropleth-maps"><i class="fa fa-check"></i><b>12.6.1</b> Choropleth maps</a></li>
</ul></li>
<li class="chapter" data-level="12.7" data-path="maps.html"><a href="maps.html#animated-maps"><i class="fa fa-check"></i><b>12.7</b> Animated maps</a></li>
<li class="chapter" data-level="12.8" data-path="maps.html"><a href="maps.html#interactive-maps"><i class="fa fa-check"></i><b>12.8</b> Interactive maps</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="c20.html"><a href="c20.html"><i class="fa fa-check"></i><b>13</b> Appendices</a>
<ul>
<li class="chapter" data-level="13.1" data-path="c20.html"><a href="c20.html#practical-a-getting-started"><i class="fa fa-check"></i><b>13.1</b> Practical A: Getting started</a>
<ul>
<li class="chapter" data-level="13.1.1" data-path="c20.html"><a href="c20.html#install-necessary-packages"><i class="fa fa-check"></i><b>13.1.1</b> Install necessary packages</a></li>
<li class="chapter" data-level="13.1.2" data-path="c20.html"><a href="c20.html#create-an-rstudio-project"><i class="fa fa-check"></i><b>13.1.2</b> Create An Rstudio Project</a></li>
<li class="chapter" data-level="13.1.3" data-path="c20.html"><a href="c20.html#create-an-r-markdown-file"><i class="fa fa-check"></i><b>13.1.3</b> Create an R Markdown file</a></li>
<li class="chapter" data-level="13.1.4" data-path="c20.html"><a href="c20.html#create-new-folders"><i class="fa fa-check"></i><b>13.1.4</b> Create New folders</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="c20.html"><a href="c20.html#practical-b-working-with-climate-data"><i class="fa fa-check"></i><b>13.2</b> Practical B: Working with climate data</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="c20.html"><a href="c20.html#part-1-rasters"><i class="fa fa-check"></i><b>13.2.1</b> Part 1: rasters</a></li>
<li class="chapter" data-level="13.2.2" data-path="c20.html"><a href="c20.html#part-2-descriptive-statistics"><i class="fa fa-check"></i><b>13.2.2</b> Part 2 descriptive statistics</a></li>
<li class="chapter" data-level="13.2.3" data-path="c20.html"><a href="c20.html#using-more-data"><i class="fa fa-check"></i><b>13.2.3</b> Using more data</a></li>
<li class="chapter" data-level="13.2.4" data-path="c20.html"><a href="c20.html#wind"><i class="fa fa-check"></i><b>13.2.4</b> Wind</a></li>
<li class="chapter" data-level="13.2.5" data-path="c20.html"><a href="c20.html#precipitation"><i class="fa fa-check"></i><b>13.2.5</b> Precipitation</a></li>
<li class="chapter" data-level="13.2.6" data-path="c20.html"><a href="c20.html#advanced-analysis"><i class="fa fa-check"></i><b>13.2.6</b> Advanced analysis</a></li>
<li class="chapter" data-level="13.2.7" data-path="c20.html"><a href="c20.html#stars-package"><i class="fa fa-check"></i><b>13.2.7</b> stars package</a></li>
<li class="chapter" data-level="13.2.8" data-path="c20.html"><a href="c20.html#dplyr-package"><i class="fa fa-check"></i><b>13.2.8</b> dplyr package</a></li>
<li class="chapter" data-level="13.2.9" data-path="c20.html"><a href="c20.html#cubelyr"><i class="fa fa-check"></i><b>13.2.9</b> cubelyr</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="c20.html"><a href="c20.html#practical-c-finding-loading-and-cleaning-spatial-data"><i class="fa fa-check"></i><b>13.3</b> Practical C: Finding, loading, and cleaning Spatial data</a>
<ul>
<li class="chapter" data-level="13.3.1" data-path="c20.html"><a href="c20.html#thinking-about-map-data-the-way-r-does"><i class="fa fa-check"></i><b>13.3.1</b> Thinking about map data the way R does</a></li>
<li class="chapter" data-level="13.3.2" data-path="c20.html"><a href="c20.html#a-brief-introduction-to-simple-features-data-in-r"><i class="fa fa-check"></i><b>13.3.2</b> A brief introduction to simple features data in R</a></li>
<li class="chapter" data-level="13.3.3" data-path="c20.html"><a href="c20.html#finding-data"><i class="fa fa-check"></i><b>13.3.3</b> Finding data</a></li>
<li class="chapter" data-level="13.3.4" data-path="c20.html"><a href="c20.html#finding-non-geospatial-data"><i class="fa fa-check"></i><b>13.3.4</b> Finding non-geospatial data</a></li>
<li class="chapter" data-level="13.3.5" data-path="c20.html"><a href="c20.html#combining-spatial-data-with-non-spatial-data"><i class="fa fa-check"></i><b>13.3.5</b> Combining spatial data with non-spatial data</a></li>
<li class="chapter" data-level="13.3.6" data-path="c20.html"><a href="c20.html#conclusion"><i class="fa fa-check"></i><b>13.3.6</b> Conclusion</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="c20.html"><a href="c20.html#practical-d-making-maps-with-ggplot2"><i class="fa fa-check"></i><b>13.4</b> Practical D: Making maps with ggplot2</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="c20.html"><a href="c20.html#import-and-clean-the-datasets"><i class="fa fa-check"></i><b>13.4.1</b> Import and clean the datasets</a></li>
<li class="chapter" data-level="13.4.2" data-path="c20.html"><a href="c20.html#add-highlights-and-annotations"><i class="fa fa-check"></i><b>13.4.2</b> Add highlights and annotations</a></li>
<li class="chapter" data-level="13.4.3" data-path="c20.html"><a href="c20.html#inset-map"><i class="fa fa-check"></i><b>13.4.3</b> inset map</a></li>
<li class="chapter" data-level="13.4.4" data-path="c20.html"><a href="c20.html#final-beautification"><i class="fa fa-check"></i><b>13.4.4</b> Final beautification</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="c20.html"><a href="c20.html#practical-e-the-bathmetry-data"><i class="fa fa-check"></i><b>13.5</b> Practical E: The bathmetry data</a>
<ul>
<li class="chapter" data-level="13.5.1" data-path="c20.html"><a href="c20.html#zoom-in-on-a-region-of-interest"><i class="fa fa-check"></i><b>13.5.1</b> Zoom in on a region of interest</a></li>
</ul></li>
<li class="chapter" data-level="13.6" data-path="c20.html"><a href="c20.html#practical-f-drawing-maps-programmatically-with-r"><i class="fa fa-check"></i><b>13.6</b> Practical F: Drawing maps programmatically with R</a>
<ul>
<li class="chapter" data-level="13.6.1" data-path="c20.html"><a href="c20.html#a-solution-using-r-and-its-ecosystem-of-packages"><i class="fa fa-check"></i><b>13.6.1</b> A solution using R and its ecosystem of packages</a></li>
<li class="chapter" data-level="13.6.2" data-path="c20.html"><a href="c20.html#getting-started"><i class="fa fa-check"></i><b>13.6.2</b> Getting started</a></li>
<li class="chapter" data-level="13.6.3" data-path="c20.html"><a href="c20.html#data-and-basic-plot-ggplot-and-geom_sf"><i class="fa fa-check"></i><b>13.6.3</b> Data and basic plot (<code>ggplot</code> and <code>geom_sf</code>)</a></li>
<li class="chapter" data-level="13.6.4" data-path="c20.html"><a href="c20.html#title-subtitle-and-axis-labels-ggtitle-xlab-ylab"><i class="fa fa-check"></i><b>13.6.4</b> Title, subtitle, and axis labels (<code>ggtitle</code>, <code>xlab</code>, <code>ylab</code>)</a></li>
<li class="chapter" data-level="13.6.5" data-path="c20.html"><a href="c20.html#map-color-geom_sf"><i class="fa fa-check"></i><b>13.6.5</b> Map color (<code>geom_sf</code>)</a></li>
<li class="chapter" data-level="13.6.6" data-path="c20.html"><a href="c20.html#projection-and-extent-coord_sf"><i class="fa fa-check"></i><b>13.6.6</b> Projection and extent (<code>coord_sf</code>)</a></li>
<li class="chapter" data-level="13.6.7" data-path="c20.html"><a href="c20.html#scale-bar-and-north-arrow-package-ggspatial"><i class="fa fa-check"></i><b>13.6.7</b> Scale bar and North arrow (package <code>ggspatial</code>)</a></li>
<li class="chapter" data-level="13.6.8" data-path="c20.html"><a href="c20.html#country-names-and-other-names-geom_text-and-annotate"><i class="fa fa-check"></i><b>13.6.8</b> Country names and other names (<code>geom_text</code> and <code>annotate</code>)</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li class='after'">
   <a href="https://lugoga.github.io/geomarine/" aria-label='Author Website Link'>
      <img src="images/geoR.svg" style="width:25%; padding:0px 0; display:block; margin: 0 auto;" alt="MC logo">
   </a>
</li>
<li class='after'">
   <div style='text-align:center'>
      <a https://github.com/lugoga/geomarine/" aria-label='GitHub Link'>
         <i class="fab fa-github fa-2x" aria-hidden="true"></i>
      </a>
   </div>
</li>
<li class='after'">
   <div style='text-align:center'>
      <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/" aria-label="Creative commons CCBYSA link">
         <i class="fab fa-creative-commons fa-lg"></i> 
         <i class="fab fa-creative-commons-by fa-lg"></i> 
         <i class="fab fa-creative-commons-sa fa-lg"></i>
      </a>
   </div>
</li>      

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Practical Spatial Data</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="dplyr" class="section level1" number="6">
<h1><span class="header-section-number">Chapter 6</span> Manipulating Data with <strong>dplyr</strong></h1>
<p>Before a dataset can be analysed in R, its often manipulated or transformed in various ways. For years manipulating data in R required more programming than actually analyzing data. That has improved dramatically with the <strong>dplyr</strong> package. It provides programmers with an intuitive vocabulary for executing data management and analysis tasks. Hadley Wickham <span class="citation">(<a href="#ref-dplyr" role="doc-biblioref">2020</a>)</span>, the original creator of the <strong>dplyr</strong> package, refers to it as a <em>Grammar of Data Manipulation</em>. Because the package provides a set of functions (verbs) that let you modify data and perform common data preparation tasks. The key challenge in programming is mapping from questions about a data set to specific programming operations. With dplyr’s verbs, makes this process smoother, as it enables you to use the same vocabulary to both ask questions and write your code. In other words, the dplyr verbs lets you easily talk with data and transform a dataset in various ways with easy.</p>
<div id="why-use-dplyr" class="section level2" number="6.1">
<h2><span class="header-section-number">6.1</span> Why use dplyr?</h2>
<p>Using this package’s functions will allow you to code expressively—code that are easy to write and read, which make you effective and efficient data scientists.</p>
<ol style="list-style-type: decimal">
<li>Great for data exploration and manipulation</li>
<li>Intuitive to write and easy to read, especially when using the chaining syntax</li>
<li>Fast on data frame—tabular dataset</li>
</ol>
</div>
<div id="core-dplyr-functions" class="section level2" number="6.2">
<h2><span class="header-section-number">6.2</span> Core dplyr Functions</h2>
<p>I will not go through all of the <strong>dplyr</strong> functions in this chapter. I will demonstrate the core functions that are used regularly for manipulating data. The five core functions also called verbs include:</p>
<ul>
<li><code>select()</code> to select columns based on their names</li>
<li><code>filter()</code> to rows in data frame</li>
<li><code>arrange()</code> to re-order or arrange the rows in ascending or descending order</li>
<li><code>mutate()</code> to create new columns—add new variable</li>
<li><code>summarise()</code> to make a summary of variable(s)</li>
<li><code>group_by()</code> to group observation</li>
<li><code>sample_n()</code> and <code>rename()</code>to make random sample from the data set</li>
</ul>
<p>The <code>group_by()</code> function perform other common task which are related to the <em>split-apply-combine</em> concept. You can use these verbs when you describe the algorithm or process for interrogating data, and then use <strong>dplyr</strong> verbs to write code that will closely follow your “plain language” description because it uses functions and procedures that share the same language.</p>
<p>For most of us who are familiar with the R base function, you will find that most <strong>dplyr</strong> functions on data frames can be expressed succinctly because you don’t need to repeat the name of the data frame. This becomes handy in operation, because <code>dplyr</code> package comes with the pipe operateor <code>%&gt;%</code> from the <code>magrittr</code> package <span class="citation">(Bache and Wickham <a href="#ref-magrittr" role="doc-biblioref">2020</a>)</span>, which allows to combine several functions in a chain to manipulate data.</p>
<p>To use dplyr functions to manipulate your data, it must be already installed in your machine so that you can load with a <code>require ()</code> function. Once the package is loaded, its functions are available for use.
dplyr is a key package of the tidyverse ecosystem—a collection of R packages, which also includes other packages like, <strong>readr</strong> <span class="citation">(Wickham and Hester <a href="#ref-readr" role="doc-biblioref">2020</a>)</span>, <strong>purr</strong>,<strong>tibble</strong> <span class="citation">(Müller and Wickham <a href="#ref-tibble" role="doc-biblioref">2020</a>)</span>, <strong>stringr</strong> <span class="citation">(Wickham <a href="#ref-stringr" role="doc-biblioref">2019</a>)</span>, <strong>forcats</strong>, <strong>tidyr</strong> <span class="citation">(Wickham <a href="#ref-tidyr" role="doc-biblioref">2020</a>)</span> and <strong>ggplot2</strong> <span class="citation">(Wickham <a href="#ref-ggplot" role="doc-biblioref">2016</a>)</span>.</p>
<div class="sourceCode" id="cb175"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb175-1"><a href="dplyr.html#cb175-1"></a><span class="kw">require</span>(tidyverse)</span></code></pre></div>
</div>
<div id="data" class="section level2" number="6.3">
<h2><span class="header-section-number">6.3</span> Data</h2>
<p>Data frames are ideal for representing data where each row is an observations and each column is a variable. Nearly all packages in a tidyverse work on data frames new version called <em>tibble</em>. A tibble provides stricter checking and better formatting than the traditional data frame.</p>
<p>To demonstrate the usefulness of the <strong>dplyr</strong> package for manipulating data, we will use the CTD data of 22 stations casted along the coastal water of Tanzania. I have prepared the data, cleaned and align the profile into 5 meter standard depth for each cast and merged them into a single <code>.csv</code> file. You need to load the file into your R session. We can import the file with <code>read_csv()</code> function from the <strong>readr</strong> package <span class="citation">(Wickham and Hester <a href="#ref-readr" role="doc-biblioref">2020</a>)</span>. The <code>read_csv()</code> function gives out a <em>tibble</em> <span class="citation">(Müller and Wickham <a href="#ref-tibble" role="doc-biblioref">2020</a>)</span>.</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="dplyr.html#cb176-1"></a>ctd =<span class="st"> </span><span class="kw">read_csv</span>(<span class="st">&quot;data/algoa_ctd.csv&quot;</span>)</span></code></pre></div>
</div>
<div id="choosing-rows-filtering-observations" class="section level2" number="6.4">
<h2><span class="header-section-number">6.4</span> Choosing rows: Filtering observations</h2>
<p>The first dplyr verb we’ll explore is <code>filter()</code>. This function is primarily used to create a subset of observations that meet a specified conditions. The <code>filter()</code> function lets you pick out rows based on logical expressions. You give the function a predicate, specifying what a row should satisfy to be included. For instance, take a look at the chunk below:</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="dplyr.html#cb177-1"></a>surface =<span class="st"> </span>ctd <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb177-2"><a href="dplyr.html#cb177-2"></a><span class="st">  </span><span class="kw">filter</span>(pressure <span class="op">&lt;</span><span class="st"> </span><span class="dv">150</span>)</span>
<span id="cb177-3"><a href="dplyr.html#cb177-3"></a>surface</span></code></pre></div>
<pre><code># A tibble: 637 x 12
   station time                  lon   lat pressure temperature salinity
   &lt;chr&gt;   &lt;dttm&gt;              &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt;
 1 st1     2004-08-18 15:27:46  40.6 -10.5        5        25.2     33.9
 2 st1     2004-08-18 15:27:46  40.6 -10.5       10        25.1     34.9
 3 st1     2004-08-18 15:27:46  40.6 -10.5       15        25.1     34.9
 4 st1     2004-08-18 15:27:46  40.6 -10.5       20        25.0     34.9
 5 st1     2004-08-18 15:27:46  40.6 -10.5       25        24.9     34.9
 6 st1     2004-08-18 15:27:46  40.6 -10.5       30        24.9     34.9
 7 st1     2004-08-18 15:27:46  40.6 -10.5       35        24.9     34.9
 8 st1     2004-08-18 15:27:46  40.6 -10.5       40        24.9     34.9
 9 st1     2004-08-18 15:27:46  40.6 -10.5       45        24.8     34.9
10 st1     2004-08-18 15:27:46  40.6 -10.5       50        24.6     34.9
# ... with 627 more rows, and 5 more variables: oxygen &lt;dbl&gt;,
#   fluorescence &lt;dbl&gt;, spar &lt;dbl&gt;, par &lt;dbl&gt;, density &lt;dbl&gt;</code></pre>
<p>The expression calls the ctd dataset and feed into the <code>filter()</code>and pick all observations with pressure below 150meters and create a new datase called surface. This is an expression where a single conditional statement is used.</p>
<p>We can also limit the of the variable of interest by combining multiple conditional expressions as part of the <code>filter()</code>. Each expression (argument) is combined with an “AND” clause by default. This means that all expressions must be matched for a recorded to be returned. For instance we want to pick observations that were measured between 5 and 10 meters water only. We combine theses expressions with <code>&amp;</code> operator;</p>
<div class="sourceCode" id="cb179"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb179-1"><a href="dplyr.html#cb179-1"></a>ctd <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb179-2"><a href="dplyr.html#cb179-2"></a><span class="st">  </span><span class="kw">filter</span>(pressure <span class="op">&gt;=</span><span class="st"> </span><span class="dv">0</span> <span class="op">&amp;</span><span class="st"> </span>pressure <span class="op">&lt;=</span><span class="st"> </span><span class="dv">10</span>)</span></code></pre></div>
<pre><code># A tibble: 44 x 12
   station time                  lon   lat pressure temperature salinity
   &lt;chr&gt;   &lt;dttm&gt;              &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt;
 1 st1     2004-08-18 15:27:46  40.6 -10.5        5        25.2     33.9
 2 st1     2004-08-18 15:27:46  40.6 -10.5       10        25.1     34.9
 3 st2     2004-08-18 17:00:01  40.8 -10.5        5        25.2     34.8
 4 st2     2004-08-18 17:00:01  40.8 -10.5       10        25.2     34.8
 5 st3     2004-08-18 20:32:54  41.0 -10.5        5        NA       NA  
 6 st3     2004-08-18 20:32:54  41.0 -10.5       10        25.0     34.9
 7 st4     2004-08-18 22:44:56  41.1 -10.5        5        NA       NA  
 8 st4     2004-08-18 22:44:56  41.1 -10.5       10        NA       NA  
 9 st5     2004-08-19 00:59:59  41.3 -10.5        5        NA       NA  
10 st5     2004-08-19 00:59:59  41.3 -10.5       10        NA       NA  
# ... with 34 more rows, and 5 more variables: oxygen &lt;dbl&gt;,
#   fluorescence &lt;dbl&gt;, spar &lt;dbl&gt;, par &lt;dbl&gt;, density &lt;dbl&gt;</code></pre>
<p>We can also use the <code>between()</code> function, which is equivalent to <code>pressure &gt;= 0 &amp; pressure &lt;= 10</code> in above chunk to achive the same result.</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="dplyr.html#cb181-1"></a>ctd <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb181-2"><a href="dplyr.html#cb181-2"></a><span class="st">  </span><span class="kw">filter</span>(<span class="kw">between</span>(pressure, <span class="dv">5</span>,<span class="dv">10</span>))</span></code></pre></div>
<pre><code># A tibble: 44 x 12
   station time                  lon   lat pressure temperature salinity
   &lt;chr&gt;   &lt;dttm&gt;              &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt;
 1 st1     2004-08-18 15:27:46  40.6 -10.5        5        25.2     33.9
 2 st1     2004-08-18 15:27:46  40.6 -10.5       10        25.1     34.9
 3 st2     2004-08-18 17:00:01  40.8 -10.5        5        25.2     34.8
 4 st2     2004-08-18 17:00:01  40.8 -10.5       10        25.2     34.8
 5 st3     2004-08-18 20:32:54  41.0 -10.5        5        NA       NA  
 6 st3     2004-08-18 20:32:54  41.0 -10.5       10        25.0     34.9
 7 st4     2004-08-18 22:44:56  41.1 -10.5        5        NA       NA  
 8 st4     2004-08-18 22:44:56  41.1 -10.5       10        NA       NA  
 9 st5     2004-08-19 00:59:59  41.3 -10.5        5        NA       NA  
10 st5     2004-08-19 00:59:59  41.3 -10.5       10        NA       NA  
# ... with 34 more rows, and 5 more variables: oxygen &lt;dbl&gt;,
#   fluorescence &lt;dbl&gt;, spar &lt;dbl&gt;, par &lt;dbl&gt;, density &lt;dbl&gt;</code></pre>
<p>In the next example, two conditional expressions are passed. The first is used to filter surface water below 200 m, and the second statement filter records that above latitude 6°S</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="dplyr.html#cb183-1"></a>ctd <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb183-2"><a href="dplyr.html#cb183-2"></a><span class="st">  </span><span class="kw">filter</span>(pressure <span class="op">&lt;</span><span class="st"> </span><span class="dv">200</span> <span class="op">&amp;</span><span class="st"> </span>lat <span class="op">&gt;</span><span class="st"> </span><span class="dv">-6</span>)</span></code></pre></div>
<pre><code># A tibble: 223 x 12
   station time                  lon   lat pressure temperature salinity
   &lt;chr&gt;   &lt;dttm&gt;              &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt;
 1 st17    2004-08-23 19:42:30  40.1 -5.49        5        25.6     35.2
 2 st17    2004-08-23 19:42:30  40.1 -5.49       10        25.4     35.1
 3 st17    2004-08-23 19:42:30  40.1 -5.49       15        25.3     35.1
 4 st17    2004-08-23 19:42:30  40.1 -5.49       20        25.4     35.2
 5 st17    2004-08-23 19:42:30  40.1 -5.49       25        25.4     35.2
 6 st17    2004-08-23 19:42:30  40.1 -5.49       30        25.4     35.2
 7 st17    2004-08-23 19:42:30  40.1 -5.49       35        25.4     35.2
 8 st17    2004-08-23 19:42:30  40.1 -5.49       40        25.4     35.2
 9 st17    2004-08-23 19:42:30  40.1 -5.49       45        25.4     35.2
10 st17    2004-08-23 19:42:30  40.1 -5.49       50        25.4     35.2
# ... with 213 more rows, and 5 more variables: oxygen &lt;dbl&gt;,
#   fluorescence &lt;dbl&gt;, spar &lt;dbl&gt;, par &lt;dbl&gt;, density &lt;dbl&gt;</code></pre>
<p>In this case, the surface.transect dataset has records where both conditions are met—the pressure is blow 200 meter and latitude above -6. Note that when two or more conditions are paased, the &amp; operator is used.</p>
<p>You may sometimes want to know stations and at what depth a particular variable has missing values. You can pick all variable in the data frame using <code>is.na()</code> function.</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="dplyr.html#cb185-1"></a>ctd <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb185-2"><a href="dplyr.html#cb185-2"></a><span class="st">  </span><span class="kw">filter</span>(<span class="kw">is.na</span>(fluorescence))</span></code></pre></div>
<pre><code># A tibble: 7 x 12
  station time                  lon    lat pressure temperature salinity
  &lt;chr&gt;   &lt;dttm&gt;              &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt;
1 st3     2004-08-18 20:32:54  41.0 -10.5         5          NA       NA
2 st4     2004-08-18 22:44:56  41.1 -10.5         5          NA       NA
3 st4     2004-08-18 22:44:56  41.1 -10.5        10          NA       NA
4 st5     2004-08-19 00:59:59  41.3 -10.5         5          NA       NA
5 st5     2004-08-19 00:59:59  41.3 -10.5        10          NA       NA
6 st10    2004-08-19 19:36:50  39.7  -8.83        5          NA       NA
7 st10    2004-08-19 19:36:50  39.7  -8.83       10          NA       NA
# ... with 5 more variables: oxygen &lt;dbl&gt;, fluorescence &lt;dbl&gt;,
#   spar &lt;dbl&gt;, par &lt;dbl&gt;, density &lt;dbl&gt;</code></pre>
<p>You can also drop the observation with missing values in the data frame using the <code>!is.na()</code> operator</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="dplyr.html#cb187-1"></a>ctd <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb187-2"><a href="dplyr.html#cb187-2"></a><span class="st">  </span><span class="kw">filter</span>(<span class="op">!</span><span class="kw">is.na</span>(fluorescence))</span></code></pre></div>
<pre><code># A tibble: 2,789 x 12
   station time                  lon   lat pressure temperature salinity
   &lt;chr&gt;   &lt;dttm&gt;              &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt;
 1 st1     2004-08-18 15:27:46  40.6 -10.5        5        25.2     33.9
 2 st1     2004-08-18 15:27:46  40.6 -10.5       10        25.1     34.9
 3 st1     2004-08-18 15:27:46  40.6 -10.5       15        25.1     34.9
 4 st1     2004-08-18 15:27:46  40.6 -10.5       20        25.0     34.9
 5 st1     2004-08-18 15:27:46  40.6 -10.5       25        24.9     34.9
 6 st1     2004-08-18 15:27:46  40.6 -10.5       30        24.9     34.9
 7 st1     2004-08-18 15:27:46  40.6 -10.5       35        24.9     34.9
 8 st1     2004-08-18 15:27:46  40.6 -10.5       40        24.9     34.9
 9 st1     2004-08-18 15:27:46  40.6 -10.5       45        24.8     34.9
10 st1     2004-08-18 15:27:46  40.6 -10.5       50        24.6     34.9
# ... with 2,779 more rows, and 5 more variables: oxygen &lt;dbl&gt;,
#   fluorescence &lt;dbl&gt;, spar &lt;dbl&gt;, par &lt;dbl&gt;, density &lt;dbl&gt;</code></pre>
<p>When you have string variable in the data frame with character or factor format, you can filter the certain observation with <code>%in%</code> statement. For example, to obtain profiles from three stations: st1, st8, and st13, we can write the code as;</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="dplyr.html#cb189-1"></a>ctd <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb189-2"><a href="dplyr.html#cb189-2"></a><span class="st">  </span><span class="kw">filter</span>(station <span class="op">%in%</span><span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;st1&quot;</span>, <span class="st">&quot;st8&quot;</span>, <span class="st">&quot;st13&quot;</span>))</span></code></pre></div>
<pre><code># A tibble: 347 x 12
   station time                  lon   lat pressure temperature salinity
   &lt;chr&gt;   &lt;dttm&gt;              &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt;
 1 st1     2004-08-18 15:27:46  40.6 -10.5        5        25.2     33.9
 2 st1     2004-08-18 15:27:46  40.6 -10.5       10        25.1     34.9
 3 st1     2004-08-18 15:27:46  40.6 -10.5       15        25.1     34.9
 4 st1     2004-08-18 15:27:46  40.6 -10.5       20        25.0     34.9
 5 st1     2004-08-18 15:27:46  40.6 -10.5       25        24.9     34.9
 6 st1     2004-08-18 15:27:46  40.6 -10.5       30        24.9     34.9
 7 st1     2004-08-18 15:27:46  40.6 -10.5       35        24.9     34.9
 8 st1     2004-08-18 15:27:46  40.6 -10.5       40        24.9     34.9
 9 st1     2004-08-18 15:27:46  40.6 -10.5       45        24.8     34.9
10 st1     2004-08-18 15:27:46  40.6 -10.5       50        24.6     34.9
# ... with 337 more rows, and 5 more variables: oxygen &lt;dbl&gt;,
#   fluorescence &lt;dbl&gt;, spar &lt;dbl&gt;, par &lt;dbl&gt;, density &lt;dbl&gt;</code></pre>
</div>
<div id="select" class="section level2" number="6.5">
<h2><span class="header-section-number">6.5</span> select</h2>
<p>The second verb we are going to demonstrate is the <code>select()</code> function. Often you work with large datasets with many columns but only a few are actually of interest to you. The <code>select()</code> function selects columns of the data frame. <code>select()</code> function allows you to choose variables that are of interest. You can use it to pick out a some columns from the dataset. For instance, fi we want pressure, temprature, salinity, fluorescence and ovygen variables from the data frame, we can simply write a code as;</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="dplyr.html#cb191-1"></a>ctd <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb191-2"><a href="dplyr.html#cb191-2"></a><span class="st">  </span><span class="kw">select</span> (pressure, temperature, salinity, fluorescence, oxygen)</span></code></pre></div>
<pre><code># A tibble: 2,796 x 5
   pressure temperature salinity fluorescence oxygen
      &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt;        &lt;dbl&gt;  &lt;dbl&gt;
 1        5        25.2     33.9        0.560   3.93
 2       10        25.1     34.9        0.599   4.49
 3       15        25.1     34.9        0.650   4.50
 4       20        25.0     34.9        0.678   4.51
 5       25        24.9     34.9        0.760   4.51
 6       30        24.9     34.9        0.729   4.50
 7       35        24.9     34.9        0.740   4.49
 8       40        24.9     34.9        0.693   4.48
 9       45        24.8     34.9        0.703   4.46
10       50        24.6     34.9        0.752   4.44
# ... with 2,786 more rows</code></pre>
<p>Besides just selecting columns, you can use a minus sign to remove variables you do not need from the data frame.</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="dplyr.html#cb193-1"></a>ctd <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb193-2"><a href="dplyr.html#cb193-2"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>spar, <span class="op">-</span>par, <span class="op">-</span>density, <span class="op">-</span>time) </span></code></pre></div>
<pre><code># A tibble: 2,796 x 8
   station   lon   lat pressure temperature salinity oxygen fluorescence
   &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;        &lt;dbl&gt;
 1 st1      40.6 -10.5        5        25.2     33.9   3.93        0.560
 2 st1      40.6 -10.5       10        25.1     34.9   4.49        0.599
 3 st1      40.6 -10.5       15        25.1     34.9   4.50        0.650
 4 st1      40.6 -10.5       20        25.0     34.9   4.51        0.678
 5 st1      40.6 -10.5       25        24.9     34.9   4.51        0.760
 6 st1      40.6 -10.5       30        24.9     34.9   4.50        0.729
 7 st1      40.6 -10.5       35        24.9     34.9   4.49        0.740
 8 st1      40.6 -10.5       40        24.9     34.9   4.48        0.693
 9 st1      40.6 -10.5       45        24.8     34.9   4.46        0.703
10 st1      40.6 -10.5       50        24.6     34.9   4.44        0.752
# ... with 2,786 more rows</code></pre>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb195-1"><a href="dplyr.html#cb195-1"></a><span class="co">## or you can bind the variable you want to remove</span></span>
<span id="cb195-2"><a href="dplyr.html#cb195-2"></a>ctd <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb195-3"><a href="dplyr.html#cb195-3"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span><span class="kw">c</span>(spar, par, density, time))</span></code></pre></div>
<pre><code># A tibble: 2,796 x 8
   station   lon   lat pressure temperature salinity oxygen fluorescence
   &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;        &lt;dbl&gt;
 1 st1      40.6 -10.5        5        25.2     33.9   3.93        0.560
 2 st1      40.6 -10.5       10        25.1     34.9   4.49        0.599
 3 st1      40.6 -10.5       15        25.1     34.9   4.50        0.650
 4 st1      40.6 -10.5       20        25.0     34.9   4.51        0.678
 5 st1      40.6 -10.5       25        24.9     34.9   4.51        0.760
 6 st1      40.6 -10.5       30        24.9     34.9   4.50        0.729
 7 st1      40.6 -10.5       35        24.9     34.9   4.49        0.740
 8 st1      40.6 -10.5       40        24.9     34.9   4.48        0.693
 9 st1      40.6 -10.5       45        24.8     34.9   4.46        0.703
10 st1      40.6 -10.5       50        24.6     34.9   4.44        0.752
# ... with 2,786 more rows</code></pre>
<p>You can drop a range of variables in the data frame with <code>select()</code> function. For instance, the code below drop all variables beween temperature to fluorescence. You can also select those variables in range by removing the negative sign</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb197-1"><a href="dplyr.html#cb197-1"></a><span class="co"># hide a range of columns</span></span>
<span id="cb197-2"><a href="dplyr.html#cb197-2"></a>ctd <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb197-3"><a href="dplyr.html#cb197-3"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>(temperature<span class="op">:</span>fluorescence))</span></code></pre></div>
<pre><code># A tibble: 2,796 x 8
   station time                  lon   lat pressure  spar   par density
   &lt;chr&gt;   &lt;dttm&gt;              &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
 1 st1     2004-08-18 15:27:46  40.6 -10.5        5 1177. 53.9    1022.
 2 st1     2004-08-18 15:27:46  40.6 -10.5       10 1151. 40.3    1023.
 3 st1     2004-08-18 15:27:46  40.6 -10.5       15 1135. 31.3    1023.
 4 st1     2004-08-18 15:27:46  40.6 -10.5       20 1124. 25.6    1023.
 5 st1     2004-08-18 15:27:46  40.6 -10.5       25 1111. 21.1    1023.
 6 st1     2004-08-18 15:27:46  40.6 -10.5       30 1103. 17.2    1023.
 7 st1     2004-08-18 15:27:46  40.6 -10.5       35 1097. 13.9    1023.
 8 st1     2004-08-18 15:27:46  40.6 -10.5       40 1091. 11.2    1023.
 9 st1     2004-08-18 15:27:46  40.6 -10.5       45 1087.  9.05   1024.
10 st1     2004-08-18 15:27:46  40.6 -10.5       50 1084.  7.30   1024.
# ... with 2,786 more rows</code></pre>
<p>Just like you can pick columns with the matching name, you can also drop any column with a matching name</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb199-1"><a href="dplyr.html#cb199-1"></a>ctd <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb199-2"><a href="dplyr.html#cb199-2"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span><span class="kw">contains</span>(<span class="st">&quot;t&quot;</span>))</span></code></pre></div>
<pre><code># A tibble: 2,796 x 6
     lon pressure oxygen fluorescence  spar   par
   &lt;dbl&gt;    &lt;dbl&gt;  &lt;dbl&gt;        &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1  40.6        5   3.93        0.560 1177. 53.9 
 2  40.6       10   4.49        0.599 1151. 40.3 
 3  40.6       15   4.50        0.650 1135. 31.3 
 4  40.6       20   4.51        0.678 1124. 25.6 
 5  40.6       25   4.51        0.760 1111. 21.1 
 6  40.6       30   4.50        0.729 1103. 17.2 
 7  40.6       35   4.49        0.740 1097. 13.9 
 8  40.6       40   4.48        0.693 1091. 11.2 
 9  40.6       45   4.46        0.703 1087.  9.05
10  40.6       50   4.44        0.752 1084.  7.30
# ... with 2,786 more rows</code></pre>
<p>Because of the naming conventions, many of the column names that you import dont make sense. You will often need to change the name of the variable. <code>select()</code> function allows you to accomplish that. For example, we want to select station, pressure and fluoresence, but we need also change the name of station to be Cast, pressure to Depth and fluorescence to Chlorophyll. You can achieve that with code written as;</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="dplyr.html#cb201-1"></a>ctd <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb201-2"><a href="dplyr.html#cb201-2"></a><span class="st">  </span><span class="kw">select</span>(<span class="dt">Cast =</span> station, <span class="dt">Depth =</span> pressure, <span class="dt">Chlorophyll =</span> fluorescence)</span></code></pre></div>
<pre><code># A tibble: 2,796 x 3
   Cast  Depth Chlorophyll
   &lt;chr&gt; &lt;dbl&gt;       &lt;dbl&gt;
 1 st1       5       0.560
 2 st1      10       0.599
 3 st1      15       0.650
 4 st1      20       0.678
 5 st1      25       0.760
 6 st1      30       0.729
 7 st1      35       0.740
 8 st1      40       0.693
 9 st1      45       0.703
10 st1      50       0.752
# ... with 2,786 more rows</code></pre>
<blockquote>
<p>There are also a number of handy helper functions that you can use with the <code>select()</code> function to filter the returned columns. These include <code>starts_with()</code>, <code>ends_with()</code>, <code>contains()</code>, <code>matches()</code>, and <code>num_range()</code>. I wont illustrate them here, however, you can consult the help document for more information.</p>
</blockquote>
<div id="adding-new-variables-mutate-transmute-add_rownames" class="section level3" number="6.5.1">
<h3><span class="header-section-number">6.5.1</span> Adding new variables: mutate, transmute, add_rownames</h3>
<p>Besides selecting sets of existing columns, it’s often useful to add new columns that are functions of existing columns. This is the job of <code>mutate()</code>: Any new variable created with the mutate() function will be added to the end of the data frame. For example, raw fluorescence values are often skewed (Figure <a href="dplyr.html#fig:fl-trans">6.1</a>a) and we often transform them to have normal distribution (figure <a href="dplyr.html#fig:fl-trans">6.1</a>b).</p>
<div class="figure"><span id="fig:fl-trans"></span>
<img src="geoMarine_files/figure-html/fl-trans-1.png" alt="Histogram showing the distribution of a) raw fluorence and b) log-transformed fluorescence values" width="672" />
<p class="caption">
Figure 6.1: Histogram showing the distribution of a) raw fluorence and b) log-transformed fluorescence values
</p>
</div>
<p>At this situation, its handy to add a new column with transformed values in the data frame as shown in the code;</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="dplyr.html#cb203-1"></a>ctd <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb203-2"><a href="dplyr.html#cb203-2"></a><span class="st">  </span><span class="kw">select</span>(pressure, fluorescence) <span class="op">%&gt;%</span></span>
<span id="cb203-3"><a href="dplyr.html#cb203-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">log.fluorescence =</span> fluorescence <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">log10</span>())</span></code></pre></div>
<pre><code># A tibble: 2,796 x 3
   pressure fluorescence log.fluorescence
      &lt;dbl&gt;        &lt;dbl&gt;            &lt;dbl&gt;
 1        5        0.560           -0.251
 2       10        0.599           -0.223
 3       15        0.650           -0.187
 4       20        0.678           -0.169
 5       25        0.760           -0.119
 6       30        0.729           -0.138
 7       35        0.740           -0.131
 8       40        0.693           -0.159
 9       45        0.703           -0.153
10       50        0.752           -0.124
# ... with 2,786 more rows</code></pre>
<p>The code tells important two steps: the first steps involved selecting the pressure and fluorescence variables, once these variables were selected fromt he ctd data frame were fed into a <code>mutate()</code> function, which computed the logarithmic of fluorescence and assign a new <code>log.fluorescence</code> variable into the data frame.</p>
<p>In a similar way above, we can create a new variable of anomaly as the code below shows;</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="dplyr.html#cb205-1"></a>ctd <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb205-2"><a href="dplyr.html#cb205-2"></a><span class="st">  </span><span class="kw">select</span>(pressure, fluorescence) <span class="op">%&gt;%</span></span>
<span id="cb205-3"><a href="dplyr.html#cb205-3"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">anomaly =</span> fluorescence <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(fluorescence, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</span></code></pre></div>
<pre><code># A tibble: 2,796 x 3
   pressure fluorescence anomaly
      &lt;dbl&gt;        &lt;dbl&gt;   &lt;dbl&gt;
 1        5        0.560   0.425
 2       10        0.599   0.464
 3       15        0.650   0.515
 4       20        0.678   0.542
 5       25        0.760   0.624
 6       30        0.729   0.593
 7       35        0.740   0.604
 8       40        0.693   0.557
 9       45        0.703   0.568
10       50        0.752   0.617
# ... with 2,786 more rows</code></pre>
</div>
<div id="arranging-rows" class="section level3" number="6.5.2">
<h3><span class="header-section-number">6.5.2</span> Arranging rows</h3>
<p>The <code>arrange()</code> function in the <strong>dplyr</strong> package can be used to order the rows in a data frame. This function accepts a set of columns to order by with the default row ordering being in ascending order.</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="dplyr.html#cb207-1"></a>ctd <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb207-2"><a href="dplyr.html#cb207-2"></a><span class="st">  </span><span class="kw">arrange</span>(pressure)</span></code></pre></div>
<pre><code># A tibble: 2,796 x 12
   station time                  lon    lat pressure temperature salinity
   &lt;chr&gt;   &lt;dttm&gt;              &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt;
 1 st1     2004-08-18 15:27:46  40.6 -10.5         5        25.2     33.9
 2 st2     2004-08-18 17:00:01  40.8 -10.5         5        25.2     34.8
 3 st3     2004-08-18 20:32:54  41.0 -10.5         5        NA       NA  
 4 st4     2004-08-18 22:44:56  41.1 -10.5         5        NA       NA  
 5 st5     2004-08-19 00:59:59  41.3 -10.5         5        NA       NA  
 6 st6     2004-08-19 11:49:08  40.3  -8.83        5        25.2     34.9
 7 st7     2004-08-19 13:33:31  40.2  -8.83        5        25.3     34.9
 8 st8     2004-08-19 15:28:18  40.0  -8.83        5        25.0     34.9
 9 st9     2004-08-19 17:39:39  39.8  -8.83        5        25.1     34.9
10 st10    2004-08-19 19:36:50  39.7  -8.83        5        NA       NA  
# ... with 2,786 more rows, and 5 more variables: oxygen &lt;dbl&gt;,
#   fluorescence &lt;dbl&gt;, spar &lt;dbl&gt;, par &lt;dbl&gt;, density &lt;dbl&gt;</code></pre>
<p>By default, it orders numerical values in increasing order, but you can ask for decreasing order using the <code>desc()</code> function:</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="dplyr.html#cb209-1"></a>ctd <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb209-2"><a href="dplyr.html#cb209-2"></a><span class="st">  </span><span class="kw">arrange</span>(pressure <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">desc</span>())</span></code></pre></div>
<pre><code># A tibble: 2,796 x 12
   station time                  lon   lat pressure temperature salinity
   &lt;chr&gt;   &lt;dttm&gt;              &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt;
 1 st3     2004-08-18 20:32:54  41.0 -10.5     1015        6.43     34.8
 2 st3     2004-08-18 20:32:54  41.0 -10.5     1010        6.45     34.8
 3 st3     2004-08-18 20:32:54  41.0 -10.5     1005        6.45     34.8
 4 st3     2004-08-18 20:32:54  41.0 -10.5     1000        6.45     34.8
 5 st3     2004-08-18 20:32:54  41.0 -10.5      995        6.46     34.8
 6 st3     2004-08-18 20:32:54  41.0 -10.5      990        6.48     34.8
 7 st3     2004-08-18 20:32:54  41.0 -10.5      985        6.55     34.8
 8 st3     2004-08-18 20:32:54  41.0 -10.5      980        6.60     34.8
 9 st3     2004-08-18 20:32:54  41.0 -10.5      975        6.60     34.8
10 st3     2004-08-18 20:32:54  41.0 -10.5      970        6.62     34.8
# ... with 2,786 more rows, and 5 more variables: oxygen &lt;dbl&gt;,
#   fluorescence &lt;dbl&gt;, spar &lt;dbl&gt;, par &lt;dbl&gt;, density &lt;dbl&gt;</code></pre>
</div>
</div>
<div id="summarizing-and-grouping" class="section level2" number="6.6">
<h2><span class="header-section-number">6.6</span> Summarizing and Grouping</h2>
<p>Summary statistics for a data frame can be produced with the <code>summarise()</code> function. The summarise() function produces a single row of data containing summary statistics from a data frame. For example, you can compute for the mean of fluorescence values:</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="dplyr.html#cb211-1"></a>ctd <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb211-2"><a href="dplyr.html#cb211-2"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">fl.mean =</span> <span class="kw">mean</span>(fluorescence, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</span></code></pre></div>
<pre><code># A tibble: 1 x 1
  fl.mean
    &lt;dbl&gt;
1   0.118</code></pre>
<p>By itself, it’s not that useful until chained with the <code>group_by()</code> verb to compute summary statistics. There you can split the data into different groups and compute the summaries for each group.For example, you can ask for the mean of and standard deviation values of fluorescence for each station in the data frame:</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="dplyr.html#cb213-1"></a>ctd <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(station) <span class="op">%&gt;%</span></span>
<span id="cb213-2"><a href="dplyr.html#cb213-2"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">Mean =</span> <span class="kw">mean</span>(fluorescence, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb213-3"><a href="dplyr.html#cb213-3"></a>           <span class="dt">STD =</span> <span class="kw">sd</span>(fluorescence, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</span></code></pre></div>
<pre><code># A tibble: 5 x 3
  station   Mean   STD
  &lt;chr&gt;    &lt;dbl&gt; &lt;dbl&gt;
1 st1     0.304  0.319
2 st13    0.0897 0.179
3 st18    0.101  0.287
4 st4     0.0970 0.233
5 st8     0.125  0.381</code></pre>
<p>You can group by one or more variables; you just specify the columns you want to separate into different subsets to the function. It works best when grouping by factors or discrete numbers; there isn’t much fun in grouping by real numbers.</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="dplyr.html#cb215-1"></a>ctd <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">group_by</span>(station, lon)<span class="op">%&gt;%</span></span>
<span id="cb215-2"><a href="dplyr.html#cb215-2"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">Mean =</span> <span class="kw">mean</span>(fluorescence, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</span>
<span id="cb215-3"><a href="dplyr.html#cb215-3"></a>           <span class="dt">STD =</span> <span class="kw">sd</span>(fluorescence, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</span></code></pre></div>
<pre><code># A tibble: 5 x 4
# Groups:   station [5]
  station   lon   Mean   STD
  &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
1 st1      40.6 0.304  0.319
2 st13     40.1 0.0897 0.179
3 st18     39.9 0.101  0.287
4 st4      41.1 0.0970 0.233
5 st8      40.0 0.125  0.381</code></pre>
<p>summarise() can be used to count the number of rows in each group with <code>nc()</code>—which just counts how many observations you have in a subset of your data: You only need to parse the argument <code>n()</code> in the summarise()` function as;</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="dplyr.html#cb217-1"></a>ctd <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb217-2"><a href="dplyr.html#cb217-2"></a><span class="st">  </span><span class="kw">group_by</span>(station) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb217-3"><a href="dplyr.html#cb217-3"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">frequency =</span> <span class="kw">n</span>())</span></code></pre></div>
<pre><code># A tibble: 5 x 2
  station frequency
  &lt;chr&gt;       &lt;int&gt;
1 st1            50
2 st13          135
3 st18          163
4 st4           186
5 st8           162</code></pre>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-magrittr">
<p>Bache, Stefan Milton, and Hadley Wickham. 2020. <em>Magrittr: A Forward-Pipe Operator for R</em>. <a href="https://CRAN.R-project.org/package=magrittr">https://CRAN.R-project.org/package=magrittr</a>.</p>
</div>
<div id="ref-tibble">
<p>Müller, Kirill, and Hadley Wickham. 2020. <em>Tibble: Simple Data Frames</em>. <a href="https://CRAN.R-project.org/package=tibble">https://CRAN.R-project.org/package=tibble</a>.</p>
</div>
<div id="ref-ggplot">
<p>Wickham, Hadley. 2016. <em>Ggplot2: Elegant Graphics for Data Analysis</em>. Springer-Verlag New York. <a href="https://ggplot2.tidyverse.org">https://ggplot2.tidyverse.org</a>.</p>
</div>
<div id="ref-stringr">
<p>Wickham, Hadley. 2019. <em>Stringr: Simple, Consistent Wrappers for Common String Operations</em>. <a href="https://CRAN.R-project.org/package=stringr">https://CRAN.R-project.org/package=stringr</a>.</p>
</div>
<div id="ref-tidyr">
<p>Wickham, Hadley. 2020. <em>Tidyr: Tidy Messy Data</em>. <a href="https://CRAN.R-project.org/package=tidyr">https://CRAN.R-project.org/package=tidyr</a>.</p>
</div>
<div id="ref-dplyr">
<p>Wickham, Hadley, Romain François, Lionel Henry, and Kirill Müller. 2020. <em>Dplyr: A Grammar of Data Manipulation</em>. <a href="https://CRAN.R-project.org/package=dplyr">https://CRAN.R-project.org/package=dplyr</a>.</p>
</div>
<div id="ref-readr">
<p>Wickham, Hadley, and Jim Hester. 2020. <em>Readr: Read Rectangular Text Data</em>. <a href="https://CRAN.R-project.org/package=readr">https://CRAN.R-project.org/package=readr</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="tidy.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="plotting-in-r-with-ggplot2.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["geoMarine.pdf", "geoMarine.epub"],
"toc": {
"collapse": "section",
"toc_depth": 2,
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
